<!--
  | Website designed by JstnLT (https://jstnlt.my.id)
  | This project is open source: https://github.com/JastinXyz/discord-bot-landing-page-web
-->

<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Brix The Braixen - Loja</title>
<meta name="description" content="Brix é seu amigo raposa no Discord, com uma personalidade única e cheia de charme. Ele oferece recursos de administração, diversão, economia e inteligência artificial para transformar seu servidor em uma experiência inesquecível.">
<link rel="icon" href="assets/img/BH_Braix.png" type="image/png">
<link rel="stylesheet" href="assets/css/bulma.min.css" />
<link rel="stylesheet" href="assets/css/style.css" />
<link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />
<link rel="stylesheet" href="https://unpkg.com/tippy.js@6/animations/scale.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
  integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
/>

<script src="assets/js/jquery-3.6.0.js"></script>
</head>
<body>
  <script>
    fetch("/api/status")
      .then(res => res.json())
      .then(data => {
        document.getElementById("nome_completo").innerText = data.nome_completo;
      });
  </script>
<!-- Back To Top Start -->
<a id="backtotop" data-tippy-content="Voltar ao topo.">
  <i class="fa-solid fa-angle-up has-text-white fa-2xl mt-5"></i>
</a>
<!-- Back To Top End -->

<!-- Navbar Start -->
<nav
  class="navbar is-fixed-top"
  role="navigation"
  aria-label="main navigation"
>
<div class="navbar-brand ml-10">
  <a class="navbar-item " href="/">
    <img  src="assets/img/brixfront.png"/></img>
    <strong>Brix The Braixen</span></strong>

    <!-- or if you want to use image -->
    <!-- <img
      src="assets/img/Brix avatar (03-25).png"
      width="112"
      height="28"
    /> -->
  </a>

  <a
    role="button"
    class="navbar-burger has-text-white"
    data-target="navMenu"
    aria-label="menu"
    aria-expanded="false"
  >
    <span aria-hidden="true"></span>
    <span aria-hidden="true"></span>
    <span aria-hidden="true"></span>
  </a>
</div>

<div id="navbarBasicExample" class="navbar-menu">
  <div class="navbar-start">
    <a href="/" class="navbar-item is-tab">
      Inicio
    </a>
    <a href="https://docs.google.com/document/d/1sknHLpFqJZRbWG8sJHi3C-yc5yXqwmaaXOTSWxTCjKw/edit?usp=sharing" class="navbar-item is-tab">
      Termos de uso
    </a>

    <a href="comandos" class="navbar-item is-tab">
      Comandos
    </a>
    
    <a href="loja" class="navbar-item is-tab">
      Loja
    </a>
    <!-- 
    <a href="premium" class="navbar-item is-tab">
      Premium
    </a>
    -->
  </div>

  <div class="navbar-end">
    <a href="https://dsc.gg/braixen" class="navbar-item is-tab" target="_blank">
      <i class="fa-brands fa-discord"></i>
    </a>
    <a href="https://top.gg/bot/983000989894336592" class="navbar-item is-tab" target="_blank">
      <i class="fa-solid fa-check-to-slot"></i>
    </a>
    <a href="https://github.com/O-Braixen/Brix" class="navbar-item is-tab " target="_blank">
      <i class="fa-brands fa-github"></i>
    </a>
        
    <!-- Novo ícone Discloud -->
      <a href="https://discloud.com/" class="navbar-item is-tab" target="_blank">
        <img src="https://docs.discloud.com/~gitbook/image?url=https%3A%2F%2F1155855661-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F8p3J4WAYBioqdR7bmrbb%252Fuploads%252Fr6pbWL3eCMl4WW6wbDpN%252Ficon.svg%3Falt%3Dmedia%26token%3D8cde79c2-b8f8-4d89-a290-d7477ec66373&width=768&dpr=1&quality=100&sign=4dda0a58&sv=2" 
        alt="Discloud" style="height: 20px; width: auto; border-radius: 0px;">
      </a>



    <div class="navbar-item" id="user-dropdown">
      {% if session.user %}
        <a class="navbar-link is-flex is-align-items-center" id="user-dropdown-toggle" style="cursor: pointer;">
          <figure class="image is-32x32 mr-2">
            <img class="is-rounded" src="https://cdn.discordapp.com/avatars/{{ session.user.id }}/{{ session.user.avatar }}.png?size=1024" alt="Avatar">
          </figure>
          {{ session.user.username }}
        </a>

        <!-- Tira is-flex daqui -->
        <div class="user-dropdown navbar-menu" id="user-dropdown-menu">
          <a class="navbar-item is-tab" href="/dashboard">
            <i class="fa-solid fa-table-columns mr-2"></i> Dashboard
          </a>
          <a class="navbar-item is-tab" href="/logout">
            <i class="fa-solid fa-right-from-bracket mr-2"></i> Sair
          </a>
        </div>
      {% else %}
        <div class="buttons mt-2">
          <a href="/login" class="button is-blurple">
            <strong><i class="fa-solid fa-right-to-bracket mr-2"></i> Login</strong>
          </a>
        </div>
      {% endif %}
    </div>






    <i class="ml-12"></i>
    </div>
  </div>
</nav>
<!-- Navbar End -->


<!-- Hero Section Start -->
<section class="hero bg-base is-fullheight">
  <div class="hero-body">
    <div class="container">
      <div class="columns">
        <div class="column mr-6 mt-12 ml-10" data-aos="fade-up">
          <p class="title msgbrix has-text-weight-bold">
            Cofira a minha incrivel <br><span class="mt-20 blurple">Loja</span>
          </p>
          <p class="subtitle subtexto is-size-6 mt-3">
            Todos os itens listados aqui podem ser adquiridos com o comando <span class="blurple">/Loja diaria</span> lá dentro do discord, te garanto que é um item mais bonito que o anterior, então rola ai e dá uma olhada.
          </p>

        </div>
        <div class="column" data-aos="fade-left">
          <img
            class="image has-image-centered vert-move"
            src="assets/img/image_loja.png"
            alt="hero image"
            style="width: 40rem"
          />
        </div>
      </div>
    </div>
  </div>
  <div class="has-text-centered" data-tippy-content="Scroll Down">
    <a href="#loja"
      ><i
        class="fa-solid fa-circle-chevron-down fa-lg vert-move2 blurple"
      ></i
    ></a>
  </div>
</section>
<!-- Hero Section End -->

<!-- Hero Waves Start -->
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
  <path
    fill="#4b4b4a"
    fill-opacity="1"
    d="M0,288L24,261.3C48,235,96,181,144,154.7C192,128,240,128,288,149.3C336,171,384,213,432,202.7C480,192,528,128,576,133.3C624,139,672,213,720,213.3C768,213,816,139,864,101.3C912,64,960,64,1008,106.7C1056,149,1104,235,1152,240C1200,245,1248,171,1296,144C1344,117,1392,139,1416,149.3L1440,160L1440,0L1416,0C1392,0,1344,0,1296,0C1248,0,1200,0,1152,0C1104,0,1056,0,1008,0C960,0,912,0,864,0C816,0,768,0,720,0C672,0,624,0,576,0C528,0,480,0,432,0C384,0,336,0,288,0C240,0,192,0,144,0C96,0,48,0,24,0L0,0Z"
  ></path>
</svg>
<!-- Hero Waves End -->

<!-- CONTEÚDO -->
<section id="loja" class="section mt-6">
  <div class="has-text-centered">
    <h1 class="title lined">Itens da loja diaria</h1>
    <div class="line line-center blurple"></div>
  </div>
  




  <section class="section">
    <div class="container">
      <!-- Total de itens -->
      <h2 id="contador-itens" class="title is-5 mb-4"></h2>
  
      <!-- Barra de pesquisa -->
      <div class="field has-addons mb-4">
        <div class="control has-icons-left is-expanded">
          <input class="input" type="text" placeholder="Pesquisar item..." id="searchItemInput">
          <span class="icon is-left">
            <i class="fas fa-search"></i>
          </span>
        </div>
      </div>
      
      <!-- Botões de filtro -->
      <div class="buttons">
        <button class="button is-info is-medium" id="filter-all">Todos</button>
        <button class="button is-info is-medium" id="filter-0">Itens Comum</button>
        <button class="button is-info is-medium" id="filter-1">Itens Raros</button>
        <button class="button is-info is-medium" id="filter-2">Itens Epicos</button>
        <button class="button is-info is-medium" id="filter-3">Itens Exclusivos</button>
      </div>

      <!-- Container dos itens -->
      <div id="loja-container"></div>
    </div>
  </section>
  
  <!-- Modal de imagem -->
  <div id="img-modal" class="modal">
    <div class="modal-background" onclick="fecharModal()"></div>
    <div class="modal-content">
      <img id="img-modal-content" src="" style="max-height: 90vh; margin: auto; display: block;">
    </div>
    <button class="modal-close is-large" aria-label="close" onclick="fecharModal()"></button>
  </div>
  
  <script>
const searchInput = document.getElementById('searchItemInput');
const container = document.getElementById("loja-container");
const contador = document.getElementById("contador-itens");

const raridades = {
  0: 'Comum',
  1: 'Raro',
  2: 'Epico',
  3: 'Exclusive'
};

let itensFiltrados = [];
let paginaAtual = 1;
const itensPorPagina = 18;

async function carregarItens() {
  try {
    const resposta = await fetch("/api/loja");
    const dados = await resposta.json();

    if (!Array.isArray(dados) || dados.length === 0) {
      container.innerHTML = "<p>Nenhum item encontrado.</p>";
      contador.textContent = "Total de itens: 0";
      return;
    }

    itensFiltrados = dados;
    contador.textContent = `Total de itens: ${itensFiltrados.length}`;
    exibirItens(itensFiltrados);

    // Pesquisa
    searchInput.addEventListener('input', () => {
      paginaAtual = 1;
      const termo = searchInput.value.toLowerCase();
      const filtrados = itensFiltrados.filter(item =>
        item.name.toLowerCase().includes(termo) ||
        item.descricao.toLowerCase().includes(termo) ||
        item._id.toLowerCase().includes(termo)
      );
      exibirItens(filtrados);
    });

    // Filtros
    document.getElementById('filter-all').addEventListener('click', () => {
      paginaAtual = 1;
      exibirItens(itensFiltrados);
    });

    document.getElementById('filter-0').addEventListener('click', () => {
      paginaAtual = 1;
      exibirItens(itensFiltrados.filter(item => item.raridade === 0));
    });

    document.getElementById('filter-1').addEventListener('click', () => {
      paginaAtual = 1;
      exibirItens(itensFiltrados.filter(item => item.raridade === 1));
    });

    document.getElementById('filter-2').addEventListener('click', () => {
      paginaAtual = 1;
      exibirItens(itensFiltrados.filter(item => item.raridade === 2));
    });

    document.getElementById('filter-3').addEventListener('click', () => {
      paginaAtual = 1;
      exibirItens(itensFiltrados.filter(item => item.raridade === 3));
    });

  } catch (erro) {
    container.innerHTML = "<p>Erro ao carregar itens.</p>";
    contador.textContent = "Total de itens: 0";
    console.error(erro);
  }
}

function exibirItens(itens) {
  const totalPaginas = Math.ceil(itens.length / itensPorPagina);
  const inicio = (paginaAtual - 1) * itensPorPagina;
  const fim = inicio + itensPorPagina;
  const itensPagina = itens.slice(inicio, fim);

  if (itensPagina.length === 0) {
    container.innerHTML = "<p>Nenhum item encontrado.</p>";
    return;
  }

  const lista = document.createElement("ul");
  lista.className = "item-grid";

  itensPagina.forEach((item, index) => {
    const li = document.createElement("li");
    li.className = "item-box";
    li.style.animationDelay = `${index * 0.1}s`; // 0.05 segundos entre cada
    li.dataset.texto = `${item._id} ${item.name} ${item.descricao}`.toLowerCase();
    li.innerHTML = `
      <img src="/imagens/backgroud/all-itens/${item._id}.png" 
      class="item-image" 
      onclick="abrirModal(this.src)"
      onerror="this.onerror=null; this.src='${item.url}'">
      <div class="item-title">
        ${item.name}
        <span class="color-dot" style="background-color:${item.font_color}"></span>
      </div>
      <div class="item-description">${item.descricao}</div>
      <div class="item-prices">
        <span><img src="assets/img/icon_braixencoin.png"> ${item.braixencoin}</span>
        <span><img src="assets/img/icon_graveto.png"> ${item.graveto}</span>
        <span><img src="assets/img/iconraridade${item.raridade}.png">${raridades[item.raridade] ?? 'Desconhecida'}</span>
      </div>
    `;
    lista.appendChild(li);
  });

  container.innerHTML = "";
  container.appendChild(lista);

  contador.textContent = `Total de itens: ${itens.length}`;
  renderizarPaginacao(totalPaginas, itens);
}

function renderizarPaginacao(totalPaginas, itens) {
  if (totalPaginas <= 1) return;

  const paginacaoDiv = document.createElement("div");
  paginacaoDiv.className = "pagination mt-4";

  for (let i = 1; i <= totalPaginas; i++) {
    const btn = document.createElement("button");
    btn.textContent = i;
    btn.className = "button is-small" + (i === paginaAtual ? " is-primary" : "");
    btn.addEventListener('click', () => {
      paginaAtual = i;
      exibirItens(itens);
      // rolar pro topo da seção da loja
      document.getElementById("loja").scrollIntoView({ behavior: "smooth" });
    });
    paginacaoDiv.appendChild(btn);
  }

  container.appendChild(paginacaoDiv);
}


function abrirModal(src) {
  const modal = document.getElementById("img-modal");
  const modalImg = document.getElementById("img-modal-content");
  modalImg.src = src;
  modal.classList.add("is-active");
}

function fecharModal() {
  const modal = document.getElementById("img-modal");
  const modalImg = document.getElementById("img-modal-content");
  modalImg.src = "";
  modal.classList.remove("is-active");
}

carregarItens();
</script>















    </div>
  </section>
</main>


<!-- Invite Section Start -->
<section class="section mt-6">
  <div class="columns ml-10 mr-10">
    <div class="column has-text-left">
      <p class="title has-text-weight-bold">
        Pronto para testar o <span class="blurple" id="nome">Brix</span>?
      </p>
      <p class="subtitle mt-3 has-text-gray">
        Uma raposa pronta para te ajudar sempre que precisar.
      </p>
      <a href="https://discord.com/oauth2/authorize?client_id=983000989894336592&permissions=1514245844182&integration_type=0&scope=bot+applications.commands" class="button is-blurple is-medium"
        ><strong><i class="fa-solid fa-book"></i> começar!</strong></a
      >
    </div>

    <div class="column"></div>
  </div>
</section>
<!-- Invite Section End -->







<script>
  document.addEventListener("DOMContentLoaded", function () {
    const toggle = document.getElementById("user-dropdown-toggle");
    const menu = document.getElementById("user-dropdown-menu");

    // Sempre começa fechado, forçando o estilo
    menu.style.display = "none";

    toggle.addEventListener("click", function (e) {
      e.preventDefault();
      menu.style.display = (menu.style.display === "none") ? "block" : "none";
    });

    document.addEventListener("click", function (e) {
      if (!toggle.contains(e.target) && !menu.contains(e.target)) {
        menu.style.display = "none";
      }
    });
  });
</script>











<!-- Footer Section Start -->
<footer class="footer bg-base">
  <div class="content has-text-centered has-text-white">
    <div class="mb-2">
      <a href="https://dsc.gg/braixen" class="has-text-white" target="_blank">
        <i class="fa-brands fa-discord"></i>
      </a>
      &nbsp; &nbsp;
      <a href="https://top.gg/bot/983000989894336592" class="has-text-white" target="_blank">
        <i class="fa-solid fa-check-to-slot"></i>
      </a>
      &nbsp; &nbsp;
      <a href="https://github.com/O-Braixen/Brix" class="has-text-white" target="_blank">
        <i class="fa-brands fa-github"></i>
      </a>
      
    </div>

    <p>
      <span class="has-text-weight-bold">Brix The Braixen</span></span>
      <br />
      &copy; <span id="cp-year"></span> Copyright OBraixen. Todos os direitos reservados.
    </p>



    <!-- Logo da Host Parceira -->
    <div class="mb-2" style="display: flex; align-items: center; justify-content: center; gap: 8px;">
      <span style="font-size: 14px; color: #fff;">Powered by</span>
      <a href="https://discloud.com/" target="_blank">
        <img src="https://docs.discloud.com/~gitbook/image?url=https%3A%2F%2F1155855661-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F8p3J4WAYBioqdR7bmrbb%252Fuploads%252FW5wIgwj26a80eKbrqPq0%252Ffull_white_horizontal.svg%3Falt%3Dmedia%26token%3D08ad42c0-89f6-4930-98c0-bd2ef7f720de&width=768&dpr=1&quality=100&sign=37a92771&sv=2" 
        alt="Discloud" style="max-height: 30px;">
      </a>
    </div>





    <p style="letter-spacing: 0.1em;" class="is-uppercase">
      Website Designed By
      <a
        href="https://jstnlt.my.id"
        class="blurple has-text-weight-bold"
        target="_blank"
        >JstnLT</a
      >.<br>The Original Website Design is Open Source on <a
        href="https://github.com/JastinXyz/discord-bot-landing-page-web"
        class="blurple has-text-weight-bold"
        target="_blank"
        >Github</a
      >
    </p>
  </div>
</footer>
<!-- Footer Section End -->

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script src="https://unpkg.com/@popperjs/core@2"></script>
<script src="https://unpkg.com/tippy.js@6"></script>
<script src="assets/js/script.js"></script>

</body>
</html>
